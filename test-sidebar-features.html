<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidebar Features Test - Bricks Attendance System</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .test-content {
            padding: 20px;
            margin-left: 280px;
            transition: margin-left 0.3s ease;
        }
        .feature-demo {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .demo-section {
            margin-bottom: 30px;
        }
        .demo-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        .demo-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.5;
        }
        .keyboard-shortcut {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 4px 8px;
            font-family: monospace;
            font-size: 0.9rem;
            margin: 0 2px;
        }
        .test-button {
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin: 4px;
        }
        .test-button:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <!-- This sidebar will be replaced by JavaScript -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">Loading...</div>
    </aside>

    <div class="test-content">
        <h1>Sidebar Features Test</h1>
        <p>This page demonstrates the enhanced sidebar features including Quick Actions, Theme Selector, and System Status.</p>

        <div class="demo-section">
            <div class="feature-demo">
                <div class="demo-title">üé® Theme Selector</div>
                <div class="demo-description">
                    The sidebar now includes a theme selector in the user section. Click the sun/moon icons to switch between light and dark themes.
                </div>
                <button class="test-button" onclick="testThemeSwitch()">Test Theme Switch</button>
            </div>

            <div class="feature-demo">
                <div class="demo-title">‚ö° Quick Actions</div>
                <div class="demo-description">
                    Quick action buttons for common tasks:
                    <ul>
                        <li><strong>Clock In/Out</strong> - <span class="keyboard-shortcut">Alt+C</span></li>
                        <li><strong>Add Employee</strong> - <span class="keyboard-shortcut">Alt+E</span></li>
                        <li><strong>Generate Report</strong> - <span class="keyboard-shortcut">Alt+R</span></li>
                        <li><strong>System Status</strong> - <span class="keyboard-shortcut">Alt+Q</span></li>
                    </ul>
                </div>
                <button class="test-button" onclick="testQuickActions()">Test All Quick Actions</button>
            </div>

            <div class="feature-demo">
                <div class="demo-title">üìä System Status</div>
                <div class="demo-description">
                    Real-time system status indicators showing server, database, and backup system status.
                    The status updates automatically every 30 seconds.
                </div>
                <button class="test-button" onclick="testStatusUpdate()">Force Status Update</button>
            </div>

            <div class="feature-demo">
                <div class="demo-title">üîî Notifications</div>
                <div class="demo-description">
                    Quick actions now show notifications when triggered. Notifications auto-dismiss after 3 seconds.
                </div>
                <button class="test-button" onclick="testNotifications()">Test Notifications</button>
            </div>

            <div class="feature-demo">
                <div class="demo-title">‚å®Ô∏è Keyboard Shortcuts</div>
                <div class="demo-description">
                    All quick actions support keyboard shortcuts using the Alt key:
                    <ul>
                        <li><span class="keyboard-shortcut">Alt+S</span> - Toggle sidebar</li>
                        <li><span class="keyboard-shortcut">Alt+C</span> - Quick Clock In/Out</li>
                        <li><span class="keyboard-shortcut">Alt+E</span> - Add Employee</li>
                        <li><span class="keyboard-shortcut">Alt+R</span> - Generate Report</li>
                        <li><span class="keyboard-shortcut">Alt+Q</span> - System Status</li>
                    </ul>
                </div>
                <p><em>Try the keyboard shortcuts now!</em></p>
            </div>
        </div>

        <div class="demo-section">
            <h2>FOUC Fix</h2>
            <p>The sidebar now properly prevents Flash of Unstyled Content (FOUC). The static HTML content is hidden until JavaScript loads and replaces it with the dynamic sidebar.</p>
        </div>
    </div>

    <!-- Load scripts in correct order -->
    <script src="js/mock-data.js"></script>
    <script src="js/data-service.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/sidebar.js"></script>

    <script>
        function testThemeSwitch() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            if (typeof window.setTheme === 'function') {
                window.setTheme(newTheme);
                console.log(`Theme switched to: ${newTheme}`);
            } else {
                alert('Theme manager not loaded yet');
            }
        }

        function testQuickActions() {
            if (window.sidebarManager) {
                setTimeout(() => window.sidebarManager.handleQuickClock(), 100);
                setTimeout(() => window.sidebarManager.handleQuickAddEmployee(), 600);
                setTimeout(() => window.sidebarManager.handleQuickReport(), 1100);
                setTimeout(() => window.sidebarManager.handleQuickStatus(), 1600);
            } else {
                alert('Sidebar manager not loaded yet');
            }
        }

        function testStatusUpdate() {
            if (window.sidebarManager) {
                window.sidebarManager.updateSystemStatus();
                console.log('System status updated');
            } else {
                alert('Sidebar manager not loaded yet');
            }
        }

        function testNotifications() {
            if (window.sidebarManager) {
                setTimeout(() => window.sidebarManager.showNotification('This is a success message!', 'success'), 100);
                setTimeout(() => window.sidebarManager.showNotification('This is an info message!', 'info'), 800);
                setTimeout(() => window.sidebarManager.showNotification('This is a warning message!', 'warning'), 1500);
                setTimeout(() => window.sidebarManager.showNotification('This is an error message!', 'error'), 2200);
            } else {
                alert('Sidebar manager not loaded yet');
            }
        }

        // Add some debugging info
        window.addEventListener('load', () => {
            console.log('Sidebar Features Test Page Loaded');
            console.log('Available objects:', {
                sidebarManager: typeof window.sidebarManager,
                setTheme: typeof window.setTheme,
                authService: typeof window.authService,
                dataService: typeof window.dataService
            });
        });

        // Listen for theme changes
        document.addEventListener('themeChanged', (e) => {
            console.log('Theme changed to:', e.detail);
        });
    </script>
</body>
</html>
